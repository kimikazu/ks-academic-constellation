---
layout: null
permalink: /search.json
---

[
{% comment %}
  収集対象：notes, lectures, projects（必要に応じて pages も追加）
  各ページの Front Matter に `search: false` と書けば除外できます
{% endcomment %}
{% assign docs = site.notes | concat: site.lectures | concat: site.projects %}
{% for p in site.pages %}
  {% if p.search != false and p.url != '/search.json' and p.layout != 'home' %}
    {% assign docs = docs | push: p %}
  {% endif %}
{% endfor %}

{% for d in docs %}
{
  "title": {{ d.title | default: "(no title)" | jsonify }},
  "url": {{ d.url | relative_url | jsonify }},
  "content": {{ d.content | strip_html | normalize_whitespace | truncate: 8000 | jsonify }},
  "tags": {{ d.tags | jsonify }},
  "collection": {{ d.collection | jsonify }},
  "updated": {{ d.updated | default: d.date | date: "%Y-%m-%d" | jsonify }}
}{% unless forloop.last %},{% endunless %}
{% endfor %}
]
